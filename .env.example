DATABASE_URL=postgresql+psycopg2://postgres:postgres@postgres:5432/wave-metrics
REDIS_URL=redis://redis:6379/0
SERVICE_VERSION=0.2.0
RUN_DB_MIGRATIONS=1
CACHE_TTL_SECONDS=180
GH_MAX_RETRIES=2
GH_CONCURRENCY_PER_TOKEN=2
GH_BACKOFF_BASE_SECONDS=5
GH_BACKOFF_CAP_SECONDS=60
GH_REDIS_PREFIX=gh:
GH_SEMAPHORE_TTL_SECONDS=300
GH_SEMAPHORE_ACQUIRE_TIMEOUT_SECONDS=60
GH_COOLDOWN_MAX_WAIT_SECONDS=600
TOKEN_REF_KEY_PREFIX=gh:token_ref:
#
# Token ref encryption (required)
# Generate a base64 32-byte key:
# python -c "import os,base64; print(base64.b64encode(os.urandom(32)).decode())"
TOKEN_REF_KEYS_JSON={"dev":"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="}
TOKEN_REF_ACTIVE_KEY_ID=dev
#
# Token ref TTLs
TOKEN_REF_TTL_SECONDS_NORMAL=900
TOKEN_REF_TTL_SECONDS_BULK=86400

# Bulk worker scaling (docker-compose `worker_bulk`)
CELERY_BULK_CONCURRENCY=2
PORT=8000
API_AUTH_TOKEN=
POPULATION_BASELINE_ID=

# For e2e tests
WAVE_METRICS_E2E=0  # 1 to enable
WAVE_METRICS_BASE_URL=http://localhost:8000
WAVE_METRICS_VALID_OUTPUTS_PATH=tests/data_fixtures/valid_outputs_by_token.json
